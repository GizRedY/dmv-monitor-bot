<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4F46E5">
    <meta name="description" content="Get instant notifications when NC DMV appointments become available">

    <title>NC DMV Appointment Notifications</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="apple-touch-icon" href="/icon-192.png">

    <style>
        /* Donate popup */
.donate-popup-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 50;
}

.donate-popup-backdrop.show {
    display: flex;
}

/* –£–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä—ã –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
.donate-popup {
    background: radial-gradient(circle at top left, #FACC15, #F97316);
    border-radius: 24px;
    padding: 26px 28px 22px; /* —É–≤–µ–ª–∏—á–µ–Ω–æ */
    max-width: 420px;        /* —É–≤–µ–ª–∏—á–µ–Ω–æ */
    width: 90%;
    color: #111827;
    box-shadow: 0 30px 70px rgba(15, 23, 42, 0.85);
    position: relative;
}

.donate-popup h3 {
    font-size: 1.15rem;
    font-weight: 700;
    margin-bottom: 10px;
}

.donate-popup p {
    font-size: 0.95rem;
    line-height: 1.55;
    margin-bottom: 14px;
}

.donate-popup-note {
    font-size: 0.8rem;
    opacity: 0.85;
    margin-top: 10px;
}

/* –ù–æ–≤—ã–π –∫—Ä–∞—Å–∏–≤—ã–π –∫—Ä–∞—Å–Ω–µ–Ω—å–∫–∏–π –∫—Ä–µ—Å—Ç–∏–∫ */
.donate-popup-close {
    position: absolute;
    top: 12px;
    right: 14px;
    width: 28px;               /* —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏ */
    height: 28px;
    background: #ef4444;       /* –∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫ */
    border-radius: 50%;        /* –¥–µ–ª–∞–µ–º –∫—Ä—É–≥ */
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;              /* –±–µ–ª—ã–π –∫—Ä–µ—Å—Ç–∏–∫ */
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    transition: transform 0.18s ease,
                background 0.18s ease,
                box-shadow 0.18s ease;
}

.donate-popup-close:hover {
    background: #dc2626;       /* —á—É—Ç—å —Ç–µ–º–Ω–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    transform: scale(1.15);    /* –ª—ë–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ  */
    box-shadow: 0 6px 18px rgba(0,0,0,0.3);
}




        .free-banner {
    font-size: 1.05rem;
    font-weight: 700;
    padding: 10px 20px;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.45), rgba(139, 92, 246, 0.3));
    border: 2px solid rgba(139, 92, 246, 0.6);
    color: #EDE9FE;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    margin-bottom: 6px;
    box-shadow: 0 10px 35px rgba(99, 102, 241, 0.4);
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4F46E5;
            --primary-dark: #3730A3;
            --primary-soft: #EEF2FF;
            --success: #10B981;
            --error: #EF4444;
            --text: #111827;
            --text-muted: #6B7280;
            --bg: #0F172A;
            --bg-card: #020617;
            --border: #1F2937;
            --accent: #FBBF24;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: radial-gradient(circle at top, #1D4ED8 0, #020617 55%);
            color: var(--text);
            min-height: 100vh;
        }

        .page-shell {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== TOPBAR –ü–ï–†–ï–î–ï–õ–ê–ù –ü–û–î –®–ò–†–û–ö–ò–ô –¢–ï–ö–°–¢–û–í–´–ô –ó–ê–ì–û–õ–û–í–û–ö ===== */
        .topbar {
            max-width: 960px;
            margin: 0 auto;
            padding: 22px 16px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #E5E7EB;
            text-align: center;
        }

        .topbar-title {
            display: flex;
            flex-direction: column;
            gap: 4px;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.3), rgba(99, 102, 241, 0.2));
            box-shadow: 0 20px 40px rgba(79, 70, 229, 0.5);
        }

        .topbar-title span:first-child {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: #E5E7EB;
            text-shadow: 0 2px 10px rgba(99, 102, 241, 0.6);
        }

        /* —Å—Ç–∞—Ä—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–∞ –∏ –ø–∏–ª—é–ª–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å ‚Äî –æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
        .topbar-left { ... }
        .topbar-logo { ... }
        .pill { ... }
        –∏ —Ç.–ø.
        */

        .pill-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--success);
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.35);
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .7;
            }
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 16px 16px 32px; /* –Ω–µ–º–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞ –æ—Ç —à–∞–ø–∫–∏ */
            flex: 1;
            display: flex;
        }

        .app-shell {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
            gap: 20px;
            width: 100%;
        }

        .app-main {
            background: rgba(15, 23, 42, 0.88);
            border-radius: 22px;
            border: 1px solid rgba(30, 64, 175, 0.7);
            box-shadow:
                0 25px 50px -12px rgba(15, 23, 42, 0.8),
                0 0 0 1px rgba(15, 23, 42, 0.9);
            padding: 22px 22px 18px;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
        }

        .header {
            text-align: left;
            padding: 4px 0 12px;
        }

        .header h1 {
            font-size: 1.55rem;
            font-weight: 700;
            color: #E5E7EB;
            margin-bottom: 6px;
            letter-spacing: 0.01em;
        }

        .header p {
            font-size: 0.95rem;
            color: #9CA3AF;
            line-height: 1.5;
        }

        .header .icon {
            font-size: 1.8rem;
            margin-bottom: 6px;
        }

        .subheader-line {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 10px;
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .subheader-badge {
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .subheader-badge small {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.68rem;
            color: #CBD5F5;
        }

        .subheader-badge strong {
            font-size: 0.82rem;
            color: #E5E7EB;
        }

        .card {
            background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.25), rgba(15, 23, 42, 0.85));
            border-radius: 18px;
            padding: 18px 16px;
            border: 1px solid rgba(55, 65, 81, 0.9);
            margin-bottom: 14px;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 14px 20px;
            font-size: 0.96rem;
            font-weight: 600;
            text-align: center;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            transition: transform 0.16s ease, box-shadow 0.16s ease, background 0.16s ease, border-color 0.16s ease, color 0.16s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4F46E5, #6366F1);
            color: white;
            box-shadow: 0 18px 40px rgba(79, 70, 229, 0.55);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 22px 55px rgba(79, 70, 229, 0.7);
        }

        .btn-secondary {
            background: rgba(15, 23, 42, 0.7);
            color: #E5E7EB;
            border: 1px solid rgba(148, 163, 184, 0.7);
        }

        .btn-secondary:hover:not(:disabled) {
            border-color: #6366F1;
            color: #E0E7FF;
            box-shadow: 0 10px 30px rgba(30, 64, 175, 0.55);
        }

        .btn-danger {
            background: rgba(248, 113, 113, 0.12);
            color: #FCA5A5;
            border: 1px solid rgba(248, 113, 113, 0.7);
        }

        .btn-danger:hover:not(:disabled) {
            background: #EF4444;
            color: #F9FAFB;
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.6);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .btn + .btn {
            margin-top: 10px;
        }

        .platform-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 12px;
        }

        .platform-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 14px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(55, 65, 81, 0.9);
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .platform-main {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .platform-btn:hover {
            border-color: #6366F1;
            box-shadow: 0 14px 32px rgba(37, 99, 235, 0.4);
            transform: translateY(-1px);
        }

        .platform-btn .icon {
            font-size: 1.6rem;
        }

        .platform-btn .info h3 {
            font-size: 0.98rem;
            font-weight: 600;
            margin-bottom: 2px;
            color: #E5E7EB;
        }

        .platform-btn .info p {
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .platform-tag {
            font-size: 0.72rem;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            color: #CBD5F5;
        }

        .setup-instructions {
            background: rgba(15, 23, 42, 0.7);
            border-left: 3px solid #6366F1;
            padding: 14px 14px 12px;
            border-radius: 14px;
            margin-top: 10px;
            border-top: 1px solid rgba(55, 65, 81, 0.9);
        }

        .setup-instructions h3 {
            color: #E5E7EB;
            margin-bottom: 8px;
            font-size: 0.98rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .setup-instructions ol {
            margin-left: 18px;
            font-size: 0.86rem;
        }

        .setup-instructions li {
            margin-bottom: 6px;
            color: #D1D5DB;
            line-height: 1.5;
        }

        .setup-instructions .note {
            margin-top: 10px;
            padding: 10px;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 10px;
            font-size: 0.78rem;
            color: #9CA3AF;
            border: 1px dashed rgba(75, 85, 99, 0.9);
            line-height: 1.5;
        }

        .category-list {
            display: grid;
            gap: 8px;
            margin-top: 10px;
        }

        .category-item {
            padding: 12px 12px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(55, 65, 81, 0.9);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .category-item:hover {
            border-color: #6366F1;
            transform: translateX(2px);
        }

        .category-item.selected {
            border-color: #6366F1;
            background: radial-gradient(circle at top left, rgba(79, 70, 229, 0.4), rgba(15, 23, 42, 0.98));
            box-shadow: 0 14px 32px rgba(79, 70, 229, 0.45);
        }

        .category-item h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 2px;
            color: #E5E7EB;
        }

        .category-item p {
            font-size: 0.8rem;
            color: #9CA3AF;
            line-height: 1.4;
        }

        .location-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 8px;
            margin-top: 10px;
            max-height: 350px;
            overflow-y: auto;
            padding: 4px;
        }

        .location-grid::-webkit-scrollbar {
            width: 8px;
        }

        .location-grid::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 4px;
        }

        .location-grid::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.5);
            border-radius: 4px;
        }

        .location-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(99, 102, 241, 0.7);
        }

        .location-item {
            padding: 9px 10px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(55, 65, 81, 0.9);
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: all 0.15s ease;
            font-size: 0.86rem;
            color: #E5E7EB;
        }

        .location-item:hover {
            border-color: #6366F1;
            transform: scale(1.02);
        }

        .location-item.selected {
            border-color: #4F46E5;
            background: linear-gradient(135deg, #4F46E5, #6366F1);
            color: white;
            box-shadow: 0 14px 32px rgba(79, 70, 229, 0.6);
        }

        .alert {
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 12px;
            display: none;
            font-size: 0.85rem;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert.success {
            background: rgba(16, 185, 129, 0.1);
            color: #6EE7B7;
            border: 1px solid rgba(16, 185, 129, 0.7);
        }

        .alert.error {
            background: rgba(248, 113, 113, 0.1);
            color: #FCA5A5;
            border: 1px solid rgba(248, 113, 113, 0.8);
        }

        .alert.info {
            background: rgba(59, 130, 246, 0.08);
            color: #BFDBFE;
            border: 1px solid rgba(59, 130, 246, 0.8);
        }

        .inline-error {
            display: none;
            padding: 9px 10px;
            margin-top: 8px;
            background: rgba(248, 113, 113, 0.12);
            color: #FCA5A5;
            border: 1px solid rgba(248, 113, 113, 0.75);
            border-radius: 9px;
            font-size: 0.82rem;
        }

        .inline-error.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .spinner {
            border: 3px solid rgba(31, 41, 55, 0.95);
            border-top: 3px solid #6366F1;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
            margin: 14px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .screen.active {
            display: block;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            color: #A5B4FC;
            font-weight: 500;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            gap: 6px;
            transition: color 0.15s ease;
        }

        .back-btn:hover {
            color: #C7D2FE;
            text-decoration: underline;
        }

        .progress {
            display: flex;
            justify-content: flex-start;
            gap: 6px;
            margin-bottom: 14px;
        }

        .progress-dot {
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background: rgba(55, 65, 81, 0.9);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #6366F1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.25);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: rgba(16, 185, 129, 0.12);
            color: #6EE7B7;
            border-radius: 999px;
            font-size: 0.78rem;
            font-weight: 600;
            margin-top: 4px;
            border: 1px solid rgba(16, 185, 129, 0.7);
        }

        .status-badge span {
            font-size: 1rem;
        }

        .success-summary {
            margin-top: 16px;
            padding: 12px;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 12px;
            border: 1px solid rgba(55, 65, 81, 0.9);
            text-align: left;
        }

        .success-summary p {
            font-size: 0.86rem;
            color: #D1D5DB;
            line-height: 1.6;
        }

        .success-summary p span.label {
            display: inline-block;
            width: 90px;
            color: #9CA3AF;
        }

        .app-side {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .donate-panel {
            background: radial-gradient(circle at top left, #F97316, #FACC15);
            border-radius: 22px;
            padding: 16px 16px 18px;
            color: #1F2933;
            box-shadow:
                0 22px 55px rgba(194, 65, 12, 0.7),
                0 0 0 1px rgba(251, 191, 36, 0.4);
            cursor: pointer;
            transition: transform 0.16s ease, box-shadow 0.16s ease;
        }

        .donate-panel:hover {
            transform: translateY(-2px);
            box-shadow:
                0 28px 70px rgba(194, 65, 12, 0.9),
                0 0 0 1px rgba(251, 191, 36, 0.6);
        }

        .donate-panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .donate-panel-main {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        .donate-circle {
            width: 38px;
            height: 38px;
            border-radius: 999px;
            background: rgba(250, 250, 249, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .donate-panel h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .donate-panel p {
            font-size: 0.86rem;
            line-height: 1.4;
        }

        .donate-tagline {
            margin-top: 8px;
            font-size: 0.78rem;
            opacity: 0.85;
            line-height: 1.4;
        }

        .donate-chip-row {
            display: flex;
            gap: 6px;
            margin-top: 9px;
            flex-wrap: wrap;
        }

        .donate-chip {
            font-size: 0.74rem;
            padding: 4px 7px;
            border-radius: 999px;
            background: rgba(251, 191, 36, 0.22);
            border: 1px solid rgba(217, 119, 6, 0.7);
        }

        .side-card {
            background: rgba(15, 23, 42, 0.85);
            border-radius: 20px;
            padding: 14px 14px 12px;
            border: 1px solid rgba(55, 65, 81, 0.9);
            color: #E5E7EB;
        }

        .side-card h4 {
            font-size: 0.9rem;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .side-card ul {
            list-style: none;
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .side-card li {
            display: flex;
            gap: 8px;
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .side-dot {
            width: 4px;
            height: 4px;
            border-radius: 999px;
            background: #4F46E5;
            margin-top: 7px;
            flex-shrink: 0;
        }

        .footer {
            max-width: 960px;
            margin: 0 auto;
            padding: 8px 16px 18px;
            color: #6B7280;
            font-size: 0.78rem;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 4px;
        }

        .footer a {
            color: #9CA3AF;
            text-decoration: none;
            transition: color 0.15s ease;
        }

        .footer a:hover {
            color: #CBD5E1;
            text-decoration: underline;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            font-size: 0.8rem;
            color: #9CA3AF;
            margin-top: 14px;
        }

        .features-grid div {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .location-search {
            width: 100%;
            padding: 10px 12px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(55, 65, 81, 0.9);
            border-radius: 10px;
            color: #E5E7EB;
            font-size: 0.9rem;
            margin-bottom: 10px;
            transition: border-color 0.15s ease;
        }

        .location-search:focus {
            outline: none;
            border-color: #6366F1;
        }

        .location-search::placeholder {
            color: #6B7280;
        }

        @media (max-width: 900px) {
            .app-shell {
                grid-template-columns: minmax(0, 1fr);
            }

            .app-side {
                order: -1;
            }

            .container {
                padding-top: 10px;
            }

            .topbar {
                padding-top: 16px;
                padding-bottom: 8px;
            }
        }

        @media (max-width: 640px) {
            .app-main {
                padding: 16px 14px 14px;
            }

            .donate-panel {
                padding: 12px 12px 14px;
            }

            .header h1 {
                font-size: 1.35rem;
            }

            .topbar-title span:first-child {
                font-size: 1.05rem;
            }

            .topbar-title span:last-child {
                font-size: 0.8rem;
                display: block; /* –Ω–µ —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –º–æ–±–∏–ª–µ */
            }

            .topbar {
                gap: 8px;
            }

            .location-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                max-height: 280px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }
        }


.availability-toggle-btn {
    margin-top: 12px;
    width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 9px 12px;
    border-radius: 999px;
    border: 1px solid rgba(55, 65, 81, 0.9);
    background: rgba(15, 23, 42, 0.95);
    color: #E5E7EB;
    font-size: 0.86rem;
    cursor: pointer;
    transition: background 0.15s ease, border-color 0.15s ease, transform 0.12s ease;
}

.availability-toggle-btn:hover {
    background: rgba(17, 24, 39, 1);
    border-color: rgba(99, 102, 241, 0.8);
    transform: translateY(-1px);
}

.availability-panel {
    margin-top: 10px;
    border-radius: 16px;
    border: 1px solid rgba(55, 65, 81, 0.9);
    background: rgba(15, 23, 42, 0.96);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.25s ease;
}

.availability-panel.open {
    max-height: 420px;
}

.availability-inner {
    padding: 10px 10px 12px;
}

.availability-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.availability-title {
    font-size: 0.86rem;
    font-weight: 600;
    color: #E5E7EB;
}

.availability-subtitle {
    font-size: 0.78rem;
    color: #9CA3AF;
}

.availability-filter {
    min-width: 150px;
    background: rgba(15, 23, 42, 0.95);
    border-radius: 999px;
    border: 1px solid rgba(55, 65, 81, 0.9);
    color: #E5E7EB;
    font-size: 0.8rem;
    padding: 6px 10px;
}

.availability-list {
    margin-top: 8px;
    max-height: 260px;
    overflow-y: auto;
    padding-right: 2px;
    scrollbar-width: thin;
}

.availability-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    padding: 7px 8px;
    border-radius: 10px;
    border: 1px solid rgba(31, 41, 55, 0.9);
    background: rgba(15, 23, 42, 0.95);
    font-size: 0.8rem;
    margin-bottom: 6px;
}

.availability-row:hover {
    border-color: rgba(99, 102, 241, 0.75);
}

.availability-main {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.availability-location {
    font-weight: 600;
    color: #E5E7EB;
}

.availability-meta {
    font-size: 0.74rem;
    color: #9CA3AF;
}

.availability-slots {
    font-weight: 600;
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 999px;
    background: rgba(22, 163, 74, 0.15);
    color: #6EE7B7;
    border: 1px solid rgba(22, 163, 74, 0.8);
    white-space: nowrap;
}

.availability-empty {
    font-size: 0.8rem;
    color: #9CA3AF;
    padding: 8px 4px;
    text-align: left;
}

@media (max-width: 720px) {
    .availability-panel.open {
        max-height: 360px;
    }
}

#availabilityFloatingBtn {
    width: 100%;
    margin-top: 12px;
}



/* Backdrop for availability modal */
.availability-modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.75);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

/* When modal is open */
.availability-modal-backdrop.open {
    display: flex;
}

/* Modal card */
.availability-modal {
    width: 100%;
    max-width: 480px;
    margin: 0 16px;
    background: rgba(15, 23, 42, 1);
    border-radius: 18px;
    border: 1px solid rgba(55, 65, 81, 0.9);
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.65);
    padding: 14px 14px 16px;
}

/* Header inside modal */
.availability-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 8px;
}

/* Close button */
.availability-close-btn {
    border: none;
    background: transparent;
    color: #9CA3AF;
    font-size: 1rem;
    cursor: pointer;
    padding: 4px;
    border-radius: 999px;
    line-height: 1;
}

.availability-close-btn:hover {
    background: rgba(31, 41, 55, 0.9);
    color: #E5E7EB;
}

/* Prevent scroll when modal is open */
body.availability-modal-open {
    overflow: hidden;
}

/* Grey style for zero slots */
.availability-slots.availability-slots-empty {
    background: rgba(55, 65, 81, 0.5);
    color: #D1D5DB;
    border-color: rgba(75, 85, 99, 0.9);
}

</style>
</head>
<body>
<div class="page-shell">
    <!-- ===== –ù–û–í–ê–Ø –®–ê–ü–ö–ê ===== -->
<header class="topbar">
<div class="topbar-title">
    <span class="free-banner">
        üíú FREE Appointment Notifications üíú<br>
        üíú North Carolina DMV üíú
    </span>
</div>
</header>




    <main class="container">
        <div class="app-shell">
            <div class="app-main">
                <div class="alert" id="alert"></div>

                <!-- Screen 1: Welcome -->
                <div class="screen active" id="screen-welcome">
                    <div class="header">
                        <h1>üö¶ Find NC DMV appointments faster</h1>
                        <p>We track available appointment slots and send you instant browser notifications when slots appear.</p>

                        <div class="subheader-line">
                            <div class="subheader-badge">
                                <strong>No registration, no spam, just alerts</strong>
                            </div>
                        </div>
                    </div>


<div class="card">
    <button class="btn btn-primary" onclick="showScreen('platform')">
        üîî Start free monitoring
    </button>

    <div class="features-grid">
        <div>‚úì Browser notifications</div>
        <div>‚úì No login required</div>
        <div>‚úì Works on phone & desktop</div>
    </div>

    <button
    id="availabilityFloatingBtn"
    class="availability-toggle-btn"
    onclick="openAvailabilityModal()"
>
    üìä View live availability
</button>


</div>

                </div>

                <!-- Screen 2: Platform Selection -->
                <div class="screen" id="screen-platform">
                    <span class="back-btn" onclick="showScreen('welcome')">‚Üê Back</span>
                    <div class="progress">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>

                    <div class="header">
                        <h1>Choose your device</h1>
                        <p>  Open this page on the device where you want to receive DMV notifications,  then choose that device below.</p>
                    </div>

                    <div class="card">
                        <div class="platform-grid">
                            <div class="platform-btn" onclick="selectPlatform('iphone')">
                                <div class="platform-main">
                                    <div class="icon">üì±</div>
                                    <div class="info">
                                        <h3>iPhone / iPad</h3>
                                        <p>Use Safari for the best experience.</p>
                                    </div>
                                </div>
                                <div class="platform-tag">Safari</div>
                            </div>

                            <div class="platform-btn" onclick="selectPlatform('android')">
                                <div class="platform-main">
                                    <div class="icon">ü§ñ</div>
                                    <div class="info">
                                        <h3>Android phone</h3>
                                        <p>Works great with Chrome.</p>
                                    </div>
                                </div>
                                <div class="platform-tag">Chrome</div>
                            </div>

                            <div class="platform-btn" onclick="selectPlatform('desktop')">
                                <div class="platform-main">
                                    <div class="icon">üíª</div>
                                    <div class="info">
                                        <h3>Desktop / Laptop</h3>
                                        <p>Any modern browser is supported.</p>
                                    </div>
                                </div>
                                <div class="platform-tag">Browser</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Screen 3: Setup Instructions -->
                <div class="screen" id="screen-setup">
                    <span class="back-btn" onclick="showScreen('platform')">‚Üê Back</span>

                    <div class="progress">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot"></div>
                    </div>

                    <div class="header">
                        <h1>Quick setup</h1>
                        <p>Follow the steps for your device, then continue.</p>
                    </div>

                    <div class="card">
                        <!-- iPhone instructions -->
                        <div class="setup-instructions" id="setup-iphone" style="display: none;">
                            <h3>üì± iPhone / iPad</h3>
                            <ol>
                                <li><strong>Tap the Share button</strong> at the bottom of Safari.</li>
                                <li>Select <strong>"Add to Home Screen"</strong>.</li>
                                <li>Open the app from your Home Screen and allow notifications when asked.</li>
                                <li>If notifications are not coming through, you can enable them manually in Settings ‚Üí Apps ‚Üí Notifications ‚Üí Allow</li>
                            </ol>
                            <div class="note">
                                If you don't see the app in Settings ‚Üí Notifications, open it again and repeat the signup. iOS will show the permission popup at the end.
                            </div>
                        </div>

                        <!-- Android instructions -->
                        <div class="setup-instructions" id="setup-android" style="display: none;">
                            <h3>ü§ñ Android</h3>
                            <ol>
                                <li>In Chrome, tap the menu (‚ãÆ) and choose <strong>"Add to Home screen"</strong>.</li>
                                <li>Open it from your Home Screen.</li>
                                <li>Accept the notification permission when the browser asks.</li>
                                <li>If notifications are not coming through, you can enable them manually in Settings ‚Üí Apps ‚Üí Notifications ‚Üí Allow</li>
                            </ol>
                        </div>

                        <!-- Desktop instructions -->
                        <div class="setup-instructions" id="setup-desktop" style="display: none;">

                            <h3>üíª Desktop</h3>
                            <ol>
                                <li>When the browser asks, click <strong>"Allow"</strong> for notifications.</li>
                                <li>(Optional) Install it as an app using the install icon in the address bar.</li>
                            </ol>
                            <div class="note">
                                You'll receive pop-up notifications even if this tab is in the background.
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="showScreen('category')" style="margin-top: 14px;">
                            ‚úì Done ‚Äî continue
                        </button>
                    </div>
                </div>

                <!-- Screen 4: Category Selection -->
                <div class="screen" id="screen-category">
                    <span class="back-btn" onclick="showScreen('setup')">‚Üê Back</span>

                    <div class="progress">
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active"></div>
                        <div class="progress-dot active"></div>
                    </div>

                    <div class="header">
                        <h1>What do you need?</h1>
                        <p>Select the DMV service you are trying to book.</p>
                    </div>

                    <div class="card">
                        <div class="category-list" id="categoryList">
                            <div class="spinner"></div>
                        </div>

                        <button class="btn btn-primary" onclick="showScreen('locations')" id="categoryNextBtn" disabled style="margin-top: 14px;">
                            Continue ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Screen 5: Location Selection -->
                <div class="screen" id="screen-locations">
                    <span class="back-btn" onclick="showScreen('category')">‚Üê Back</span>

                    <div class="header">
                        <h1>Choose locations</h1>
                        <p>Select specific offices or skip to monitor all of NC.</p>
                    </div>

                    <div class="card">
                        <input type="text" class="location-search" id="locationSearch" placeholder="üîç Search locations..." onkeyup="filterLocations()">

                        <div class="location-grid" id="locationGrid">
                            <!-- Will be populated with locations -->
                        </div>

                        <button class="btn btn-secondary" onclick="skipLocations()" style="margin-top: 14px;">
                            Monitor all locations in NC
                        </button>

                        <button class="btn btn-primary" onclick="subscribe()" id="subscribeBtn" disabled style="margin-top: 10px;">
                            üîî Start monitoring
                        </button>

                        <div class="inline-error" id="subscribeError"></div>
                    </div>
                </div>

                <!-- Screen 6: Success -->
                <div class="screen" id="screen-success">
                    <div class="header">
                        <div class="icon">‚úÖ</div>
                        <h1>You're all set!</h1>
                        <p>We'll notify you when matching appointments are found.</p>
                        <div class="status-badge">
                            <span>üîî</span> Monitoring active for your profile
                        </div>
                    </div>

                    <div class="card">
                        <div style="text-align: center;">
                            <div class="success-summary">
                                <p><span class="label">Category:</span> <span id="successCategory"></span></p>
                                <p style="margin-top: 4px;"><span class="label">Locations:</span> <span id="successLocations"></span></p>
                            </div>

                            <button class="btn btn-secondary" onclick="testNotification()" style="margin-top: 14px;">
                                üß™ Send test notification
                            </button>

                            <button class="btn btn-danger" onclick="unsubscribe()" style="margin-top: 10px;">
                                üîï Unsubscribe
                            </button>

                            <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 10px;">
                                ‚Üê Back to start
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Side panel with donation & info -->
            <aside class="app-side">
                <div class="donate-panel" onclick="window.open('https://google.com', '_blank')">
                    <div class="donate-panel-header">
                    </div>
                    <div class="donate-panel-main">
                        <div class="donate-circle">üíõ</div>
                        <div>
                            <h3>Help keep NC DMV alerts free</h3>
                            <p>Your donation helps cover server costs and time spent maintaining the monitor.</p>
                            <div class="donate-tagline">
                                No subscriptions, no paywall ‚Äî just a little support if this tool saves you time.
                            </div>
                            <div class="donate-chip-row">
                                <div class="donate-chip">‚òï Buy a coffee</div>
                                <div class="donate-chip">‚öôÔ∏è Keep servers running</div>
                                <div class="donate-chip">‚ù§Ô∏è Say "thank you"</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="side-card">
                    <h4>How it works</h4>
                    <ul>
                        <li>
                            <span class="side-dot"></span>
                            <span>We automatically check the official NC DMV appointment system.</span>
                        </li>
                        <li>
                            <span class="side-dot"></span>
                            <span>When a slot matches your category & location ‚Äî you get a notification.</span>
                        </li>
                        <li>
                            <span class="side-dot"></span>
                            <span>You can unsubscribe anytime with one click.</span>
                        </li>
                    </ul>
                </div>

                <div class="side-card">
                    <h4>Tips</h4>
                    <ul>
                        <li>
                            <span class="side-dot"></span>
                            <span>Allow notifications when the browser asks ‚Äî otherwise we can't alert you.</span>
                        </li>
                        <li>
                            <span class="side-dot"></span>
                            <span>Add this site to your home screen for a more "app-like" experience.</span>
                        </li>
                        <li>
                            <span class="side-dot"></span>
                            <span>You can close the tab ‚Äî notifications will still arrive.</span>
                        </li>
                    </ul>
                </div>
            </aside>
        </div>
    </main>

        <!-- Small donate popup after successful subscription -->
    <div class="donate-popup-backdrop" id="donatePopup">
        <div class="donate-popup">
            <div class="donate-popup-close" onclick="closeDonatePopup()">‚úï</div>
            <h3>Did this help you catch an appointment?</h3>
            <p>
                If you managed to grab an open DMV slot thanks to this tool,
                you can say ‚Äúthank you‚Äù with a small donation. Keeping this
                monitor running and servers online is not free ‚Äî your support
                really helps. üíõ
            </p>
            <button class="btn btn-secondary" onclick="handleDonateClick()">
                üôè Thank you
            </button>
        </div>
    </div>


    <footer class="footer">
        <span>Free NC DMV appointment notifications (unofficial helper tool).</span>
        <span>Notifications powered by your browser.</span>
    </footer>
</div>

<script src="/app.js"></script>

<!-- Floating availability button + modal -->
<button
    id="availabilityFloatingBtn"
    class="availability-toggle-btn"
    onclick="openAvailabilityModal()"
>
    üìä View live availability
</button>

<div id="availabilityModal" class="availability-modal-backdrop">
    <div class="availability-modal">
        <div class="availability-modal-header">
            <div>
                <div class="availability-title">Live DMV availability</div>
                <div class="availability-subtitle">
                    Choose a category to see all locations and their latest status.
                </div>
            </div>
            <button
                type="button"
                class="availability-close-btn"
                onclick="closeAvailabilityModal()"
            >
                ‚úï
            </button>
        </div>

        <div class="availability-inner">
            <div class="availability-header">
                <div class="availability-title">
                    Category
                </div>
                <select
                    id="availabilityCategorySelect"
                    class="availability-filter"
                    onchange="onAvailabilityCategoryChange()"
                >
                    <!-- options will be filled by JS -->
                </select>
            </div>

            <div id="availabilityList" class="availability-list">
                <div class="availability-empty">
                    Loading availability data‚Ä¶
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>
